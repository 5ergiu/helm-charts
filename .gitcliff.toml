# ====================================================================================
# ğŸ“œ GIT-CLIFF CONFIGURATION
# Generates clean, structured changelogs based on Conventional Commits.
# Fully supports Helm chart-specific commit types.
# ====================================================================================

[changelog]
header = "# Changelog\n\nAll notable changes are documented per chart."
body = """
## {{ version }} - {{ date }}

{% if commits | length == 0 %}
_No changes._
{% else %}

{% for group, commits in commits | group_by(attribute="group") %}
### {{ group }}

{% for commit in commits %}
- {{ commit.message | trim }} ({{ commit.id | truncate(length=7) }})
{% endfor %}

{% endfor %}
{% endif %}
"""
footer = ""

# Conventional commits parser
[git]
conventional_commits = true
filter_unconventional = true

# Grouping rules
commit_parsers = [
  { message = "^feat",    group = "âœ¨ Features" },
  { message = "^fix",     group = "ğŸ› Fixes" },
  { message = "^docs",    group = "ğŸ“š Documentation" },
  { message = "^refactor",group = "â™»ï¸ Refactoring" },
  { message = "^perf",    group = "âš¡ Performance" },
  { message = "^test",    group = "ğŸ§ª Tests" },
  { message = "^ci",      group = "ğŸ”„ CI/CD" },
  { message = "^build",   group = "ğŸ—ï¸ Build" },
  { message = "^style",   group = "ğŸ¨ Style" },

  # Helm-specific groups
  { message = "^chart",   group = "ğŸ“¦ Chart Updates" },
  { message = "^helm",    group = "â›µ Helm Infrastructure" },

  # Breaking changes
  { body = "BREAKING CHANGE", group = "ğŸ’¥ Breaking Changes" },
]

# Sort newest commits first
sort_commits = "newest"
